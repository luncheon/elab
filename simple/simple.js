(()=>{var H=S=>{let s,o,k="elab-drop",C="elab-dropup",D="elab-dropdown",b="data-value",a="data-selected",h="data-disabled",E="data-selected-all",v="data-placeholder",T=".elab",d="input[type=checkbox]",g="li.elab-option",A=document.createElement("li");A.className="elab-option",A.innerHTML=S.template;let O=e=>e?.nextElementSibling,R=e=>e?.previousElementSibling,w=e=>{let t=[];for(let n of e.firstElementChild.children){let i=n.getAttribute(b);i&&n.hasAttribute(a)&&t.push(i)}return t},x=e=>{let t=!0,n=!0;for(let i of e.firstElementChild.querySelectorAll(`:not([${E}]):not([${v}])`))if(!i.hasAttribute(h)){let c=i.hasAttribute(a);if(t&&=c,n&&=!c,!t&&!n)return}return t},L=()=>{if(s&&o){let e=s.getBoundingClientRect();o.style.left=s.offsetLeft+"px",o.style.width=s.offsetWidth+"px",o.classList.contains(C)?(o.style.maxHeight=e.top-8+"px",o.style.top=s.offsetTop-o.offsetHeight+"px"):(o.style.maxHeight=window.innerHeight-e.bottom-20+"px",o.style.top=s.offsetTop+s.offsetHeight+"px")}},p=()=>{s&&!s.dispatchEvent(new CustomEvent("close",{bubbles:!0,cancelable:!0,detail:{values:w(s)}}))||(s?.focus(),o?.remove(),s=o=void 0)},I=e=>{let t=e.target.closest(g);t&&t.querySelector(d)?.focus()},B=e=>{let t=e.currentTarget,n=e.target;if(!s||!n.matches(d))return;let i=n.closest(g),c=[...t.children].indexOf(i),r=s.firstElementChild.children[c];if(!!r){if(r.hasAttribute(E)){for(let l of s.firstElementChild.children)l.hasAttribute(b)&&!l.hasAttribute(h)&&(n.checked?l.setAttribute(a,""):l.removeAttribute(a));for(let l of t.querySelectorAll(d))l!==n&&!l.disabled&&(l.checked=n.checked)}else{n.checked?r.setAttribute(a,""):r.removeAttribute(a);let l=t.querySelector(`[${E}] ${d}`);if(l){let u=x(s);l.indeterminate=u===void 0,l.checked=u!==!1}}L(),s.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:{values:w(s)}})),e.stopPropagation()}},M=e=>{let t=e.target;if(!t.matches(d))return;let n=e.keyCode;if(n===38||n===40){e.preventDefault();let i=n===38?R:O;for(let c=i(t.closest(g));c;c=i(c)){let r=c.querySelector(d);if(!r?.disabled){r?.focus();break}}}},y=e=>{if(s===e)return;s&&p();let t=window.innerHeight,{left:n,top:i,bottom:c,width:r}=e.getBoundingClientRect();o=e.parentElement.insertBefore(document.createElement("ul"),e),s=e;for(let l of e.firstElementChild.cloneNode(!0).children){if(l.hasAttribute(v))continue;let u=o.appendChild(A.cloneNode(!0));for(let m of l.getAttributeNames())u.setAttribute(m,l.getAttribute(m));let f=u.querySelector(d);if(f)if(l.hasAttribute(E)){let m=x(s);f.checked=m!==!1,f.indeterminate=m===void 0}else f.value=l.getAttribute(b),f.checked=l.hasAttribute(a),f.disabled=l.hasAttribute(h);u.getElementsByTagName("slot")[0]?.replaceWith(...l.childNodes)}o.addEventListener("pointerover",I),o.addEventListener("change",B),o.addEventListener("keydown",M),o.className=k+" "+(i*1.75>t&&c+o.offsetHeight>t?C:D),L(),o.style.left=n+"px",o.style.width=r+"px",setTimeout(()=>o?.getElementsByTagName("input")[0]?.focus())};addEventListener("resize",L),addEventListener("pointerdown",e=>{let t=e.target,n=t.closest(T);n?n===s?p():y(n):o&&!o.contains(t)&&p()}),addEventListener("keydown",e=>{let t=e.target,n=e.keyCode;n===32&&t.matches(T)?(e.preventDefault(),t===o?p():y(t)):(n===38||n===40)&&t.matches(T)?(e.preventDefault(),y(t)):n===27&&o&&(e.preventDefault(),p())})};H({template:"<label class=elab-label><input class=elab-checkbox type=checkbox><div class=elab-content><slot></slot></div></label>"});})();
