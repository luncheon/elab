(()=>{var S=x=>{let l,o,D="elab-drop",y="elab-dropup",k="elab-dropdown",E="data-value",a="data-selected",m="data-disabled",f="data-selected-all",C="data-placeholder",b=".elab",r="input[type=checkbox]",h="li.elab-option",T=document.createElement("li");T.className="elab-option",T.innerHTML=x.template;let O=e=>e?.nextElementSibling,I=e=>e?.previousElementSibling,H=e=>{let n=[];for(let t of e.firstElementChild.children){let i=t.getAttribute(E);i&&t.hasAttribute(a)&&n.push(i)}return n},R=e=>{let n=!0,t=!0;for(let i of e.firstElementChild.querySelectorAll(`:not([${f}]):not([${C}])`))if(!i.hasAttribute(m)){let s=i.hasAttribute(a);if(n&&(n=s),t&&(t=!s),!n&&!t)return}return n},w=(e,n)=>{let t=R(n);e.checked=t!==!1,e.indeterminate=t===void 0},g=()=>{if(l&&o){let e=l.getBoundingClientRect();o.style.left=l.offsetLeft+"px",o.style.width=l.offsetWidth+"px",o.classList.contains(y)?(o.style.maxHeight=e.top-8+"px",o.style.top=l.offsetTop-o.offsetHeight+"px"):(o.style.maxHeight=window.innerHeight-e.bottom-20+"px",o.style.top=l.offsetTop+l.offsetHeight+"px")}},d=()=>{l&&!l.dispatchEvent(new CustomEvent("close",{bubbles:!0,cancelable:!0,detail:{values:H(l)}}))||(l?.focus(),o?.remove(),l=o=void 0)},M=e=>e.target.closest(h)?.querySelector(r)?.focus(),B=e=>{let n=e.currentTarget,t=e.target,i=t.matches(r)&&l?.firstElementChild.children[[...n.children].indexOf(t.closest(h))];if(!!i){if(i.hasAttribute(f)){for(let s of l.firstElementChild.children)s.hasAttribute(E)&&!s.hasAttribute(m)&&s.toggleAttribute(a,t.checked);for(let s of n.querySelectorAll(r))s!==t&&!s.disabled&&(s.checked=t.checked)}else{i.toggleAttribute(a,t.checked);let s=n.querySelector(`[${f}] ${r}`);s&&w(s,l)}g(),l.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:{values:H(l)}})),e.stopPropagation()}},_=e=>{let n=e.target;if(!n.matches(r))return;let t=e.keyCode;if(t===38||t===40){e.preventDefault();let i=t===38?I:O;for(let s=i(n.closest(h));s;s=i(s)){let p=s.querySelector(r);if(!p?.disabled){p?.focus();break}}}},L=e=>{if(l===e)return;l&&d();let n=window.innerHeight,{left:t,top:i,bottom:s,width:p}=e.getBoundingClientRect();o=e.parentElement.insertBefore(document.createElement("ul"),e),l=e;for(let c of e.firstElementChild.cloneNode(!0).children){if(c.hasAttribute(C))continue;let A=o.appendChild(T.cloneNode(!0));for(let v of c.getAttributeNames())A.setAttribute(v,c.getAttribute(v));let u=A.querySelector(r);u&&(c.hasAttribute(f)?w(u,l):(u.value=c.getAttribute(E),u.checked=c.hasAttribute(a),u.disabled=c.hasAttribute(m))),A.getElementsByTagName("slot")[0]?.replaceWith(...c.childNodes)}o.addEventListener("pointerover",M),o.addEventListener("change",B),o.addEventListener("keydown",_),o.className=D+" "+(i*1.75>n&&s+o.offsetHeight>n?y:k),g(),o.style.left=t+"px",o.style.width=p+"px",setTimeout(()=>o?.getElementsByTagName("input")[0]?.focus())};addEventListener("resize",g),addEventListener("pointerdown",e=>{let n=e.target,t=n.closest(b);t?t===l?d():L(t):o&&!o.contains(n)&&d()}),addEventListener("keydown",e=>{let n=e.target,t=e.keyCode;t===32&&n.matches(b)?(e.preventDefault(),n===o?d():L(n)):(t===38||t===40)&&n.matches(b)?(e.preventDefault(),L(n)):t===27&&o&&(e.preventDefault(),d())})};S({template:"<label class=elab-label><input class=elab-checkbox type=checkbox><div class=elab-content><slot></slot></div></label>"});})();
