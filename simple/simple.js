(()=>{var P=S=>{let l,o,d=document.createElement("li");d.className="elab-popup-item",d.innerHTML=S.popupItemTemplate;let x="elab-popup",y="elab-popup-dropup",k="elab-popup-dropdown",E="data-value",r="data-selected",b="data-disabled",f="data-selected-all",C="data-placeholder",h=".elab",a="input[type=checkbox]",T="."+d.className,O=e=>e?.nextElementSibling,B=e=>e?.previousElementSibling,v=e=>{let n=[];for(let t of e.firstElementChild.children){let c=t.getAttribute(E);c&&t.hasAttribute(r)&&n.push(c)}return n},M=e=>{let n=!0,t=!0;for(let c of e.firstElementChild.querySelectorAll(`:not([${f}]):not([${C}])`))if(!c.hasAttribute(b)){let s=c.hasAttribute(r);if(n&&(n=s),t&&(t=!s),!n&&!t)return}return n},H=(e,n)=>{let t=M(n);e.checked=t!==!1,e.indeterminate=t===void 0},A=()=>{if(l&&o){let e=l.getBoundingClientRect();o.style.left=l.offsetLeft+"px",o.style.width=l.offsetWidth+"px",o.classList.contains(y)?(o.style.maxHeight=e.top-8+"px",o.style.top=l.offsetTop-o.offsetHeight+"px"):(o.style.maxHeight=window.innerHeight-e.bottom-20+"px",o.style.top=l.offsetTop+l.offsetHeight+"px")}},p=()=>{l&&!l.dispatchEvent(new CustomEvent("close",{bubbles:!0,cancelable:!0,detail:{values:v(l)}}))||(l?.focus(),o?.remove(),l=o=void 0)},w=e=>e.target.closest(T)?.querySelector(a)?.focus(),_=e=>{let n=e.currentTarget,t=e.target,c=t.matches(a)&&l?.firstElementChild.children[[...n.children].indexOf(t.closest(T))];if(!!c){if(c.hasAttribute(f)){for(let s of l.firstElementChild.children)s.hasAttribute(E)&&!s.hasAttribute(b)&&s.toggleAttribute(r,t.checked);for(let s of n.querySelectorAll(a))s!==t&&!s.disabled&&(s.checked=t.checked)}else{c.toggleAttribute(r,t.checked);let s=n.querySelector(`[${f}] ${a}`);s&&H(s,l)}A(),l.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:{values:v(l)}})),e.stopPropagation()}},R=e=>{let n=e.target;if(!n.matches(a))return;let t=e.keyCode;if(t===38||t===40){e.preventDefault();let c=t===38?B:O;for(let s=c(n.closest(T));s;s=c(s)){let m=s.querySelector(a);if(!m?.disabled){m?.focus();break}}}},g=e=>{if(l===e)return;l&&p();let n=window.innerHeight,{left:t,top:c,bottom:s,width:m}=e.getBoundingClientRect();o=e.parentElement.insertBefore(document.createElement("ul"),e),l=e;for(let i of e.firstElementChild.cloneNode(!0).children){if(i.hasAttribute(C))continue;let L=o.appendChild(d.cloneNode(!0));for(let I of i.getAttributeNames())L.setAttribute(I,i.getAttribute(I));let u=L.querySelector(a);u&&(i.hasAttribute(f)?H(u,l):(u.value=i.getAttribute(E),u.checked=i.hasAttribute(r),u.disabled=i.hasAttribute(b))),L.getElementsByTagName("slot")[0]?.replaceWith(...i.childNodes)}o.addEventListener("pointerover",w),o.addEventListener("change",_),o.addEventListener("keydown",R),o.className=x+" "+(c*1.75>n&&s+o.offsetHeight>n?y:k),A(),o.style.left=t+"px",o.style.width=m+"px",setTimeout(()=>o?.getElementsByTagName("input")[0]?.focus())};addEventListener("resize",A),addEventListener("pointerdown",e=>{let n=e.target,t=n.closest(h);t?t===l?p():g(t):o&&!o.contains(n)&&p()}),addEventListener("keydown",e=>{let n=e.target,t=e.keyCode;t===32&&n.matches(h)?(e.preventDefault(),n===o?p():g(n)):(t===38||t===40)&&n.matches(h)?(e.preventDefault(),g(n)):t===27&&o&&(e.preventDefault(),p())})};P({popupItemTemplate:"<label class=elab-label><input class=elab-checkbox type=checkbox><div class=elab-content><slot></slot></div></label>"});})();
