(()=>{var C=w=>{let s,t,x="elab-drop",g="elab-dropup",H="elab-dropdown",L="data-value",d="data-selected",v="data-disabled",A="data-placeholder",f=".elab",a="input[type=checkbox]",m="li.elab-option",E=document.createElement("li");E.className="elab-option",E.innerHTML=w.template;let D=e=>e?.nextElementSibling,O=e=>e?.previousElementSibling,S=e=>{let n=[];for(let o of e.firstElementChild.children){let l=o.getAttribute(L);l&&o.hasAttribute(d)&&n.push(l)}e.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:n}))},b=()=>{if(s&&t){let e=s.getBoundingClientRect();t.style.left=s.offsetLeft+"px",t.style.width=s.offsetWidth+"px",t.classList.contains(g)?(t.style.maxHeight=e.top-8+"px",t.style.top=s.offsetTop-t.offsetHeight+"px"):(t.style.maxHeight=window.innerHeight-e.bottom-20+"px",t.style.top=s.offsetTop+s.offsetHeight+"px")}},r=()=>{s?.focus(),t?.remove(),s=t=void 0},R=e=>{let n=e.target.closest(m);n&&n.querySelector(a)?.focus()},k=e=>{let n=e.target;if(!s||!n.matches(a))return;let o=n.closest(m),l=[...e.currentTarget.children].indexOf(o),i=s.firstElementChild.children[l];n.checked?i?.setAttribute(d,""):i?.removeAttribute(d),b(),S(s),e.stopPropagation()},B=e=>{let n=e.target;if(!n.matches(a))return;let o=e.keyCode;if(o===38||o===40){e.preventDefault();let l=o===38?O:D;for(let i=l(n.closest(m));i;i=l(i)){let p=i.querySelector(a);if(!p?.disabled){p?.focus();break}}}},h=e=>{if(s===e)return;s&&r();let n=window.innerHeight,{left:o,top:l,bottom:i,width:p}=e.getBoundingClientRect();t=e.parentElement.insertBefore(document.createElement("ul"),e),s=e;for(let c of e.firstElementChild.cloneNode(!0).children){if(c.hasAttribute(A))continue;let T=t.appendChild(E.cloneNode(!0));for(let y of c.getAttributeNames())T.setAttribute(y,c.getAttribute(y));let u=T.querySelector(a);u&&(u.value=c.getAttribute(L),u.checked=c.hasAttribute(d),u.disabled=c.hasAttribute(v)),T.getElementsByTagName("slot")[0]?.replaceWith(...c.childNodes)}t.addEventListener("pointerover",R),t.addEventListener("change",k),t.addEventListener("keydown",B),t.className=x+" "+(l*1.75>n&&i+t.offsetHeight>n?g:H),b(),t.style.left=o+"px",t.style.width=p+"px",setTimeout(()=>t?.getElementsByTagName("input")[0]?.focus())};addEventListener("resize",b),addEventListener("pointerdown",e=>{let n=e.target,o=n.closest(f);o?o===s?r():h(o):t&&!t.contains(n)&&r()}),addEventListener("keydown",e=>{let n=e.target,o=e.keyCode;o===32&&n.matches(f)?(e.preventDefault(),n===t?r():h(n)):(o===38||o===40)&&n.matches(f)?(e.preventDefault(),h(n)):o===27&&t&&(e.preventDefault(),r())})};C({template:"<label class=elab-label><input class=elab-checkbox type=checkbox><div class=elab-content><slot></slot></div></label>"});})();
